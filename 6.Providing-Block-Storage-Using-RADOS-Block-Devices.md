# 管理RADOS块设备

## 基于RBD的块存储

块设备是服务器、笔记本电脑和其他计算系统最常见的长期存储设备。它们将数据存储在固定大小的块中。块设备包括基于旋转磁碟的硬盘驱动器和基于非易失性存储器的固态驱动器。要使用存储，请使用文件系统格式化块设备，并将其挂载到Linux文件系统层次结构上

RBD (RADOS Block Device)特性提供来自Red Hat Ceph存储集群的块存储。RADOS在Red Hat Ceph存储集群的池中提供了存储为RBD映像的虚拟块设备

## 管理和配置RBD镜像

作为存储管理员，可以使用rbd命令创建、列表、检索块设备镜像信息、调整大小和移除块设备镜像。创建RBD镜像的示例如下:

1. 确保rbd映像的rbd池(或自定义池)存在。使用ceph osd pool create命令创建RBD镜像池。创建完成后，需要使用rbd pool init命令对其进行初始化

2. 虽然Ceph管理员可以访问池，但Red Hat建议您使用Ceph auth命令为客户端创建一个更受限制的Cephx用户。授予用户只对需要的RBD池进行读写访问，而不是访问整个集群

3. 使用RBD Create - -size size pooI-name/image-name命令创建RBD镜像。如果不指定存储池名称，则使用默认的存储池名称

rbd_defaultlt_pool参数指定用于存储RBD映像的默认池的名称。使用ceph config set osd rbd_default pool value设置该参数

## 访问RADOS块设备存储

内核RBD客户端(krbd)将RBD映像映射到Linux块设备。librbd库为KVM虚拟机和OpenStack云实例提供RBD存储。这些客户机允许裸机服务器或虚拟机使用RBD映像作为普通的基于块的存储。在OpenStack环境中，OpenStack将这些RBD映像附加并映射到Linux服务器，它们可以作为启动设备。Red Hat Ceph Storage 将虚拟块设备使用的实际存储分散到整个集群中，通过IP网络提供高性能访问

### 使用RBD内核客户端访问Ceph存储

Ceph客户端可以使用本地Linux内核模块krbd挂载RBD映像。这个模块将RBD映像映射到名称为/dev/rbd0的Linux块设备

![](https://gitee.com/cnlxh/ceph/raw/master/images/block/devices-access-rbd-kernel.svg)


